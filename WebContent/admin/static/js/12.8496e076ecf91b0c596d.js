webpackJsonp([12],{"SG/P":function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={name:"user-form",props:{oldUser:Object,isEdit:{type:Boolean,default:!1},show:{type:Boolean,default:!0}},data:function(){return{items:["普通用户","管理员"],valid:!1,user:{uid:"",password:"",name:"",email:"",role:""}}},watch:{oldUser:{immediate:!0,deep:!0,handler:function(e){this.user=Object.deepCopy(e)}}},methods:{submit:function(){var e=this;if(this.$refs.userForm.validate()){switch(this.user.role){case"普通用户":this.user.rid=1;break;case"管理员":this.user.rid=2;break;default:this.user.rid=1}this.isEdit&&(this.user.oldemail=this.oldUser.email),this.$http.post(this.isEdit?"/UserManage/edit":"/UserManage/add",this.$qs.stringify(this.user)).then(function(){e.$message.success("保存成功！"),e.closeWindow()}).catch(function(){e.$message.error("保存失败:邮箱已存在！")})}},clear:function(){this.$refs.userForm.reset()},closeWindow:function(){this.$emit("close")}}},i={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("v-form",{ref:"userForm",model:{value:e.valid,callback:function(s){e.valid=s},expression:"valid"}},[t("v-text-field",{attrs:{label:"用户名",rules:[function(e){return!!e||"用户名不能为空"}],counter:10,required:""},model:{value:e.user.name,callback:function(s){e.$set(e.user,"name",s)},expression:"user.name"}}),e._v(" "),t("v-text-field",{attrs:{label:"邮箱",rules:[function(e){return!!e||"邮箱不能为空"}],required:""},model:{value:e.user.email,callback:function(s){e.$set(e.user,"email",s)},expression:"user.email"}}),e._v(" "),t("v-text-field",{attrs:{label:"密码",rules:[function(e){return!!e||"密码不能为空"}],required:""},model:{value:e.user.password,callback:function(s){e.$set(e.user,"password",s)},expression:"user.password"}}),e._v(" "),t("v-select",{attrs:{items:e.items,label:"角色*"},model:{value:e.user.role,callback:function(s){e.$set(e.user,"role",s)},expression:"user.role"}}),e._v(" "),t("v-layout",{staticClass:"my-4"},[t("v-btn",{attrs:{color:"primary"},on:{click:e.submit}},[e._v("提交")]),e._v(" "),t("v-btn",{attrs:{color:"warning"},on:{click:e.clear}},[e._v("重置")])],1)],1)},staticRenderFns:[]};var a=t("C7Lr")(r,i,!1,function(e){t("jq2n")},"data-v-21a9a407",null);s.default=a.exports},jq2n:function(e,s){}});
//# sourceMappingURL=12.8496e076ecf91b0c596d.js.map