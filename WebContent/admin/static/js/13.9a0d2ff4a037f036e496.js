webpackJsonp([13],{mWTg:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});s("oTFt"),s("9GaO"),s("v/ij");var o=s("aiqZ"),r={name:"goods-form",components:{quillEditor:o.quillEditor},props:{step:{type:Number,default:1},isEdit:{type:Boolean,default:!1},oldGoods:Object},data:function(){return{valid:!1,headers:[],goods:{pid:"",pname:"",pstarlevel:"",ptype:"",pnewprice:"",poldprice:"",pinfo:"",plable:"",productImgs:[]}}},methods:{deleteOption:function(e,t){this.skuTemplate[e].options.splice(t,1)},listupload:function(e){this.goods.productImgs=e,console.log(this.goods.productImgs)},submit:function(){var e=this;this.goods.productImgs=this.goods.productImgs.map(function(e){return e.imgurl}),this.goods.productImgs=this.goods.productImgs&&this.goods.productImgs.length>0?this.goods.productImgs.join(","):"",this.goods.productImgs.length<=0?this.$message.error("至少选择一张图片！"):(console.log(this.goods.productImgs),this.$http.post(this.isEdit?"/ProductManage/edit":"/ProductManage/add",this.$qs.stringify(this.goods)).then(function(){e.$message.success("提交商品成功！"),e.$emit("closeForm")}).catch(function(t){console.log(t),e.$message.error("提交商品失败！"),e.$emit("closeForm")}))}},watch:{oldGoods:{immediate:!0,deep:!0,handler:function(e){null!=e&&this.isEdit&&(this.goods=Object.deepCopy(e))}}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-stepper",{attrs:{value:e.step}},[s("v-stepper-header",[s("v-stepper-step",{attrs:{step:"1",complete:e.step>1}},[e._v("基本信息")]),e._v(" "),s("v-divider"),e._v(" "),s("v-stepper-step",{attrs:{step:"2",complete:e.step>2}},[e._v("商品描述")]),e._v(" "),s("v-divider"),e._v(" "),s("v-stepper-step",{attrs:{step:"3"}},[e._v("商品图片")])],1),e._v(" "),s("v-stepper-items",[s("v-stepper-content",{attrs:{step:"1"}},[s("v-layout",{attrs:{"justify-center":""}},[s("v-flex",{attrs:{xs10:""}},[s("v-form",{ref:"basic",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[s("v-layout",{attrs:{row:""}},[s("v-flex",{attrs:{xs5:""}},[s("v-text-field",{attrs:{label:"商品分类",required:"",rules:[function(e){return!!e||"商品分类不能为空"}]},model:{value:e.goods.ptype,callback:function(t){e.$set(e.goods,"ptype",t)},expression:"goods.ptype"}})],1),e._v(" "),s("v-flex",{attrs:{"offset-xs2":"",xs5:""}},[s("v-text-field",{attrs:{label:"商品标签",required:"",rules:[function(e){return!!e||"商品标签不能为空"}]},model:{value:e.goods.plabel,callback:function(t){e.$set(e.goods,"plabel",t)},expression:"goods.plabel"}})],1)],1),e._v(" "),s("v-text-field",{attrs:{label:"商品名称",required:"",rules:[function(e){return!!e||"商品标题不能为空"}]},model:{value:e.goods.pname,callback:function(t){e.$set(e.goods,"pname",t)},expression:"goods.pname"}}),e._v(" "),s("v-layout",{attrs:{row:""}},[s("v-flex",{attrs:{xs5:""}},[s("v-text-field",{attrs:{label:"商品原价",required:"",rules:[function(e){return!!e||"商品原价不能为空"}],mask:"######"},model:{value:e.goods.poldprice,callback:function(t){e.$set(e.goods,"poldprice",t)},expression:"goods.poldprice"}})],1),e._v(" "),s("v-flex",{attrs:{"offset-xs2":"",xs5:""}},[s("v-text-field",{attrs:{label:"商品现价",required:"",rules:[function(e){return!!e||"商品现价不能为空"}],mask:"######"},model:{value:e.goods.pnewprice,callback:function(t){e.$set(e.goods,"pnewprice",t)},expression:"goods.pnewprice"}})],1)],1),e._v(" "),s("v-text-field",{attrs:{label:"商品星级",rules:[function(e){return e>-1&&e<=5||"商品星级不能为空且不能大于5"}],mask:"#"},model:{value:e.goods.pstarlevel,callback:function(t){e.$set(e.goods,"pstarlevel",t)},expression:"goods.pstarlevel"}}),e._v(" "),s("v-layout",{attrs:{row:""}},[s("v-flex",{attrs:{xs3:""}}),e._v(" "),s("v-flex")],1)],1)],1)],1)],1),e._v(" "),s("v-stepper-content",{attrs:{step:"2"}},[s("v-editor",{attrs:{"upload-url":"/Upload/image"},model:{value:e.goods.pinfo,callback:function(t){e.$set(e.goods,"pinfo",t)},expression:"goods.pinfo"}})],1),e._v(" "),s("v-stepper-content",{attrs:{step:"3"}},[s("v-layout",{attrs:{row:""}},[s("v-flex",{attrs:{xs3:""}},[s("span",{staticStyle:{"font-size":"16px",color:"#444"}},[e._v("商品图片：")])]),e._v(" "),s("v-flex",[s("v-upload",{attrs:{url:"/Upload/image",multiple:!0,"pic-width":250,"pic-height":90},on:{input:e.listupload},model:{value:e.goods.productImgs,callback:function(t){e.$set(e.goods,"productImgs",t)},expression:"goods.productImgs"}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var a=s("C7Lr")(r,l,!1,function(e){s("xWV6")},"data-v-080acf80",null);t.default=a.exports},xWV6:function(e,t){}});
//# sourceMappingURL=13.9a0d2ff4a037f036e496.js.map