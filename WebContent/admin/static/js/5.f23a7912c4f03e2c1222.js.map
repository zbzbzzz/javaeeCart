{"version":3,"sources":["webpack:///src/pages/user/UserManage.vue","webpack:///./src/pages/user/UserManage.vue?6096","webpack:///./src/pages/user/UserManage.vue","webpack:///src/pages/user/UserForm.vue","webpack:///./src/pages/user/UserForm.vue?43c8","webpack:///./src/pages/user/UserForm.vue"],"names":["UserManage","UserForm","text","align","sortable","value","getDataFromApi","item","_this","this","uid","then","_this2","resp","data","user_UserManage","render","_vm","_h","$createElement","_c","_self","attrs","color","on","click","addUser","_v","append-icon","label","single-line","hide-details","model","callback","$$v","search","expression","staticClass","headers","items","total-items","totalItems","loading","item-key","hide-actions","scopedSlots","_u","key","fn","props","$event","expanded","_s","name","email","role","icon","stopPropagation","editUser","deleteUser","flat","password","slot","outline","max-width","scrollable","show","dark","dense","isEdit","oldUser","user","reload","close","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","Object","Boolean","val","oldemail","post","$qs","stringify","closeWindow","reset","user_UserForm","ref","valid","rules","v","counter","required","$set","submit","clear"],"mappings":"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","file":"static/js/5.f23a7912c4f03e2c1222.js","sourcesContent":["<template>\n  <v-card>\n    <v-card-title>\n      <v-btn @click=\"addUser\" color=\"primary\">新增用户</v-btn>\n      <v-spacer/>\n      <v-text-field\n        append-icon=\"search\"\n        label=\"搜索\"\n        single-line\n        hide-details\n        v-model=\"search\"\n      />\n    </v-card-title>\n    <v-divider/>\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"items\"\n      :total-items=\"totalItems\"\n      :loading=\"loading\"\n      class=\"elevation-1\"\n      item-key=\"uid\"\n      hide-actions\n    >\n      <template slot=\"items\" slot-scope=\"props\">\n        <tr @click=\"props.expanded = !props.expanded\">\n        <td class=\"text-xs-center\">{{ props.item.uid }}</td>\n        <td class=\"text-xs-center\">{{ props.item.name }}</td>\n        <td class=\"text-xs-center\">{{props.item.email}}</td>\n        <td class=\"text-xs-center\">{{ props.item.role }}</td>\n        <td class=\"justify-center layout px-0\">\n          <v-btn icon @click.stop=\"editUser(props.item)\">\n            <i class=\"el-icon-edit\"/>\n          </v-btn>\n          <v-btn icon @click.stop=\"deleteUser(props.item)\">\n            <i class=\"el-icon-delete\"/>\n          </v-btn>\n        </td>\n        </tr>\n      </template>\n      <template slot=\"expand\" slot-scope=\"props\">\n        <v-card flat>\n          <v-card-text class=\"text-xs-center\">{{props.item.password}}</v-card-text>\n        </v-card>\n      </template>\n      <template slot=\"no-data\">\n        <v-alert\n          :value=\"true\"\n          color=\"info\"\n          icon=\"info\"\n          outline\n        >\n          数据正在加载中\n        </v-alert>\n      </template>\n     <!-- <template slot=\"pageText\" slot-scope=\"props\">\n        共{{props.itemsLength}}条,当前:{{ props.pageStart }} - {{ props.itemsLength }}\n      </template>-->\n    </v-data-table>\n\n    <v-dialog v-model=\"show\" max-width=\"600\" scrollable v-if=\"show\">\n      <v-card>\n        <v-toolbar dark dense color=\"primary\">\n          <v-toolbar-title>{{isEdit ? '修改用户' : '新增用户'}}</v-toolbar-title>\n          <v-spacer/>\n          <v-btn icon @click=\"show = false\">\n            <v-icon>close</v-icon>\n          </v-btn>\n        </v-toolbar>\n        <v-card-text class=\"px-5 py-2\">\n          <!-- 表单 -->\n          <user-form :oldUser=\"user\" :isEdit=\"isEdit\" @close=\"show = false\" :reload=\"getDataFromApi\"/>\n        </v-card-text>\n      </v-card>\n    </v-dialog>\n  </v-card>\n\n</template>\n\n<script>\n  import UserForm from './UserForm'\n  import {userData} from '../../mockDB'\n\n  export default {\n    name: \"UserManage\",\n    components: {\n      UserForm\n    },\n    data() {\n      return {\n        expand:false,\n        search: '',// 过滤字段\n        totalItems: 0,// 总条数\n        items: [],// 表格数据\n        loading: true,\n        pagination: {},// 分页信息\n        headers: [// 表头\n          {text: 'uid', align: 'center', value: 'uid',sortable: false},\n          {text: '用户名', align: 'center', sortable: false, value: 'name'},\n          {text: '邮箱', align: 'center', sortable: false, value: 'email'},\n          {text: '角色', align: 'center', value: 'role', sortable: false,},\n          {text: '操作', align: 'center', value: 'uid', sortable: false}\n        ],\n        show: false,// 是否弹出窗口\n        user: {}, // 用户信息\n        isEdit: false // 判断是编辑还是新增\n      }\n    },\n    watch: {\n      /*pagination: {\n        handler() {\n          this.getDataFromApi();\n        },\n        deep: true\n      },*/\n      search: {\n        handler() {\n          this.getDataFromApi();\n        }\n      },\n      show(val, oldVal) {\n        // 表单关闭后重新加载数据\n        if (oldVal) {\n          this.getDataFromApi();\n        }\n      }\n    },\n    mounted() {\n      this.getDataFromApi();\n    },\n    methods: {\n      addUser() {\n        this.user = {};\n        this.isEdit = false;\n        this.show = true;\n\n      },\n      editUser(item) {\n        this.user = item;\n        this.isEdit = true;\n        this.show = true;\n        // 查询商品分类信息，进行回显\n        /*this.$http.get(\"/item/category/bid/\" + item.id)\n          .then(resp => {\n            this.user.role = resp.data;\n          })*/\n\n      },\n      deleteUser(item) {\n        this.$message.confirm('此操作将永久删除该品牌, 是否继续?').then(() => {\n          // 发起删除请求\n          this.$http.get(\"/UserManage/delete?uid=\" + item.uid)\n            .then(() => {\n              // 删除成功，重新加载数据\n              this.$message.success(\"删除成功！\");\n              this.getDataFromApi();\n            }).catch(()=>{\n            this.$message.info(\"操作异常！\");\n          })\n        }).catch(() => {\n          this.$message.info(\"删除已取消！\");\n        });\n\n      },\n      getDataFromApi() {\n        this.loading = true;\n\n        this.$http.get(\"/UserManage/list\")\n          .then(resp => {\n            this.items=resp.data;\n            this.loading = false;\n          }).catch(error =>{\n          this.$message.info(\"获取数据失败！\");\n        })\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/user/UserManage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',[_c('v-card-title',[_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.addUser}},[_vm._v(\"新增用户\")]),_vm._v(\" \"),_c('v-spacer'),_vm._v(\" \"),_c('v-text-field',{attrs:{\"append-icon\":\"search\",\"label\":\"搜索\",\"single-line\":\"\",\"hide-details\":\"\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1),_vm._v(\" \"),_c('v-divider'),_vm._v(\" \"),_c('v-data-table',{staticClass:\"elevation-1\",attrs:{\"headers\":_vm.headers,\"items\":_vm.items,\"total-items\":_vm.totalItems,\"loading\":_vm.loading,\"item-key\":\"uid\",\"hide-actions\":\"\"},scopedSlots:_vm._u([{key:\"items\",fn:function(props){return [_c('tr',{on:{\"click\":function($event){props.expanded = !props.expanded}}},[_c('td',{staticClass:\"text-xs-center\"},[_vm._v(_vm._s(props.item.uid))]),_vm._v(\" \"),_c('td',{staticClass:\"text-xs-center\"},[_vm._v(_vm._s(props.item.name))]),_vm._v(\" \"),_c('td',{staticClass:\"text-xs-center\"},[_vm._v(_vm._s(props.item.email))]),_vm._v(\" \"),_c('td',{staticClass:\"text-xs-center\"},[_vm._v(_vm._s(props.item.role))]),_vm._v(\" \"),_c('td',{staticClass:\"justify-center layout px-0\"},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();_vm.editUser(props.item)}}},[_c('i',{staticClass:\"el-icon-edit\"})]),_vm._v(\" \"),_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();_vm.deleteUser(props.item)}}},[_c('i',{staticClass:\"el-icon-delete\"})])],1)])]}},{key:\"expand\",fn:function(props){return [_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"text-xs-center\"},[_vm._v(_vm._s(props.item.password))])],1)]}}])},[_c('template',{slot:\"no-data\"},[_c('v-alert',{attrs:{\"value\":true,\"color\":\"info\",\"icon\":\"info\",\"outline\":\"\"}},[_vm._v(\"\\n        数据正在加载中\\n      \")])],1)],2),_vm._v(\" \"),(_vm.show)?_c('v-dialog',{attrs:{\"max-width\":\"600\",\"scrollable\":\"\"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('v-card',[_c('v-toolbar',{attrs:{\"dark\":\"\",\"dense\":\"\",\"color\":\"primary\"}},[_c('v-toolbar-title',[_vm._v(_vm._s(_vm.isEdit ? '修改用户' : '新增用户'))]),_vm._v(\" \"),_c('v-spacer'),_vm._v(\" \"),_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){_vm.show = false}}},[_c('v-icon',[_vm._v(\"close\")])],1)],1),_vm._v(\" \"),_c('v-card-text',{staticClass:\"px-5 py-2\"},[_c('user-form',{attrs:{\"oldUser\":_vm.user,\"isEdit\":_vm.isEdit,\"reload\":_vm.getDataFromApi},on:{\"close\":function($event){_vm.show = false}}})],1)],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-afd247e8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/user/UserManage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-afd247e8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./UserManage.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./UserManage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./UserManage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-afd247e8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./UserManage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-afd247e8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/user/UserManage.vue\n// module id = null\n// module chunks = ","<template>\n  <v-form v-model=\"valid\" ref=\"userForm\">\n    <v-text-field\n      label=\"用户名\"\n      v-model=\"user.name\"\n      :rules=\"[v => !!v || '用户名不能为空']\"\n      :counter=\"10\"\n      required\n    />\n    <v-text-field\n      label=\"邮箱\"\n      v-model=\"user.email\"\n      :rules=\"[v => !!v || '邮箱不能为空']\"\n\n      required\n    />\n    <v-text-field\n      label=\"密码\"\n      v-model=\"user.password\"\n      :rules=\"[v => !!v || '密码不能为空']\"\n\n      required\n    />\n    <v-select\n      :items=\"items\"\n      v-model=\"user.role\"\n      label=\"角色*\"\n    ></v-select>\n\n    <v-layout class=\"my-4\">\n      <v-btn @click=\"submit\" color=\"primary\">提交</v-btn>\n      <v-btn @click=\"clear\" color=\"warning\">重置</v-btn>\n    </v-layout>\n  </v-form>\n</template>\n\n<script>\n  export default {\n    name: \"user-form\",\n    props: {\n      oldUser: Object,\n      isEdit: {\n        type: Boolean,\n        default: false\n      },\n      show: {\n        type: Boolean,\n        default: true\n      }\n    },\n    data() {\n      return {\n        items:['普通用户', '管理员'],\n        valid:false,\n        user: {\n          uid:\"\",\n          password:\"\",\n          name: \"\",\n          email:\"\",\n          role:\"\"\n        }\n      }\n    },\n    watch: {\n      oldUser:{\n        immediate: true,\n        deep:true,\n        handler(val){\n          this.user=Object.deepCopy(val);\n        }\n      }\n    },\n    methods: {\n      submit() {\n        // 表单校验\n        if (this.$refs.userForm.validate()) {\n          switch (this.user.role) {\n            case \"普通用户\":\n              this.user.rid=1;\n              break;\n            case \"管理员\":\n              this.user.rid=2;\n              break;\n            default:\n              this.user.rid=1;\n          }\n          if(this.isEdit)\n            this.user.oldemail=this.oldUser.email;\n          this.$http.post(\n            this.isEdit ? '/UserManage/edit' : '/UserManage/add',\n            this.$qs.stringify(this.user)\n          ).then(() => {\n            // 关闭窗口\n            this.$message.success(\"保存成功！\");\n            this.closeWindow();\n          }).catch(() => {\n            this.$message.error(\"保存失败:邮箱已存在！\");\n          });\n        }\n      },\n      clear() {\n        // 重置表单\n        this.$refs.userForm.reset();\n      },\n      closeWindow(){\n        this.$emit(\"close\");\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/user/UserForm.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-form',{ref:\"userForm\",model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-text-field',{attrs:{\"label\":\"用户名\",\"rules\":[function (v) { return !!v || '用户名不能为空'; }],\"counter\":10,\"required\":\"\"},model:{value:(_vm.user.name),callback:function ($$v) {_vm.$set(_vm.user, \"name\", $$v)},expression:\"user.name\"}}),_vm._v(\" \"),_c('v-text-field',{attrs:{\"label\":\"邮箱\",\"rules\":[function (v) { return !!v || '邮箱不能为空'; }],\"required\":\"\"},model:{value:(_vm.user.email),callback:function ($$v) {_vm.$set(_vm.user, \"email\", $$v)},expression:\"user.email\"}}),_vm._v(\" \"),_c('v-text-field',{attrs:{\"label\":\"密码\",\"rules\":[function (v) { return !!v || '密码不能为空'; }],\"required\":\"\"},model:{value:(_vm.user.password),callback:function ($$v) {_vm.$set(_vm.user, \"password\", $$v)},expression:\"user.password\"}}),_vm._v(\" \"),_c('v-select',{attrs:{\"items\":_vm.items,\"label\":\"角色*\"},model:{value:(_vm.user.role),callback:function ($$v) {_vm.$set(_vm.user, \"role\", $$v)},expression:\"user.role\"}}),_vm._v(\" \"),_c('v-layout',{staticClass:\"my-4\"},[_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\"提交\")]),_vm._v(\" \"),_c('v-btn',{attrs:{\"color\":\"warning\"},on:{\"click\":_vm.clear}},[_vm._v(\"重置\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-90ffc458\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/user/UserForm.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-90ffc458\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./UserForm.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./UserForm.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./UserForm.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-90ffc458\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./UserForm.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-90ffc458\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/user/UserForm.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}